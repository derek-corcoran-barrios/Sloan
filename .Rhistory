Standings <- readHTMLTable(Standings)
Standings <- list(Western = Standings$confs_standings_W, Eastern = Standings$confs_standings_E)
Standings[[1]]$Conference <- c("West")
Standings[[2]]$Conference <- c("East")
colnames(Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
Standings <- rbind(Standings[[1]], Standings[[2]])
Standings <- Standings[,c(1,2,3,9)]
View(Standings)
Standings$Team <- gsub("76ers", "Phi", Standings$Team)
Standings$Team <- gsub("(?<=\\b[A-Z])[^A-Z]+", "", Standings$Team, perl = TRUE)
Standings$Team <- gsub("DP", "Det", Standings$Team)
Standings$Team<- gsub("AH", "Atl", Standings$Team)
Standings$Team <- gsub("CB", "Chi", Standings$Team)
Standings$Team<- gsub("BC", "Bos", Standings$Team)
Standings$Team<- gsub("CC", "Cle", Standings$Team)
Standings$Team<- gsub("NOP", "NO", Standings$Team)
Standings$Team<- gsub("OM", "ORL", Standings$Team)
Standings$Team<- gsub("WW", "Was", Standings$Team)
Standings$Team<- gsub("BN", "Bkn", Standings$Team)
Standings$Team<- gsub("UJ", "Uta", Standings$Team)
Standings$Team<- gsub("MH", "Mia", Standings$Team)
Standings$Team<- gsub("CH", "Cha", Standings$Team)
Standings$Team<- gsub("TR", "Tor", Standings$Team)
Standings$Team<- gsub("IP", "Ind", Standings$Team)
Standings$Team<- gsub("HR", "Hou", Standings$Team)
Standings$Team<- gsub("DN", "Den", Standings$Team)
Standings$Team<- gsub("MG", "Mem", Standings$Team)
Standings$Team<- gsub("NYK", "NY", Standings$Team)
Standings$Team<- gsub("MB", "Mil", Standings$Team)
Standings$Team<- gsub("OCT", "Okc", Standings$Team)
Standings$Team<- gsub("SAS", "Sas", Standings$Team)
Standings$Team<- gsub("DM", "Dal", Standings$Team)
Standings$Team<- gsub("PS", "Pho", Standings$Team)
Standings$Team<- gsub("PTB", "Por", Standings$Team)
Standings$Team<- gsub("LAC", "Lac", Standings$Team)
Standings$Team<- gsub("SK", "Sac", Standings$Team)
Standings$Team<- gsub("LAL", "Lal", Standings$Team)
Standings$Team<- gsub("MT", "Min", Standings$Team)
Standings$Team<- gsub("PP", "Phi", Standings$Team)
View(Standings)
ProjStand <- merge.data.frame(Standings, AddedStand, all = TRUE)
View(ProjStand)
str(ProjStand)
ProjStand[,2] <- as.numeric((ProjStand[,2]))
ProjStand[,3] <- as.numeric((ProjStand[,3]))
View(ProjStand)
ProjStand <- merge.data.frame(Standings, AddedStand, all = TRUE)
ProjStand[,2] <- as.numeric(as.character(ProjStand[,2]))
ProjStand[,3] <- as.numeric(as.character(ProjStand[,3]))
View(ProjStand)
ProjStand$W <- ProjStand$`Current-W`+ProjStand$W
ProjStand$L <- ProjStand$`Current-L`+ProjStand$L
summary(ProjStand)
View(ProjStand)
?sort
write.csv(ProjStand, "ProjStand.csv")
saveRDS(ProjStand, "ProjStand.rds")
arrange(ProjStand, Conference,desc(W))
Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Standings <- readHTMLTable(Standings)
Standings <- list(Western = Standings$confs_standings_W, Eastern = Standings$confs_standings_E)
Standings[[1]]$Conference <- c("West")
Standings[[2]]$Conference <- c("East")
colnames(Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
Standings <- rbind(Standings[[1]], Standings[[2]])
Standings <- Standings[,c(1,2,3,9)]
Standings$Team <- gsub("76ers", "Phi", Standings$Team)
Standings$Team <- gsub("(?<=\\b[A-Z])[^A-Z]+", "", Standings$Team, perl = TRUE)
Standings$Team <- gsub("DP", "Det", Standings$Team)
Standings$Team<- gsub("AH", "Atl", Standings$Team)
Standings$Team <- gsub("CB", "Chi", Standings$Team)
Standings$Team<- gsub("BC", "Bos", Standings$Team)
Standings$Team<- gsub("CC", "Cle", Standings$Team)
Standings$Team<- gsub("NOP", "NO", Standings$Team)
Standings$Team<- gsub("OM", "ORL", Standings$Team)
Standings$Team<- gsub("WW", "Was", Standings$Team)
Standings$Team<- gsub("BN", "Bkn", Standings$Team)
Standings$Team<- gsub("UJ", "Uta", Standings$Team)
Standings$Team<- gsub("MH", "Mia", Standings$Team)
Standings$Team<- gsub("CH", "Cha", Standings$Team)
Standings$Team<- gsub("TR", "Tor", Standings$Team)
Standings$Team<- gsub("IP", "Ind", Standings$Team)
Standings$Team<- gsub("HR", "Hou", Standings$Team)
Standings$Team<- gsub("DN", "Den", Standings$Team)
Standings$Team<- gsub("MG", "Mem", Standings$Team)
Standings$Team<- gsub("NYK", "NY", Standings$Team)
Standings$Team<- gsub("MB", "Mil", Standings$Team)
Standings$Team<- gsub("OCT", "Okc", Standings$Team)
Standings$Team<- gsub("SAS", "Sas", Standings$Team)
Standings$Team<- gsub("DM", "Dal", Standings$Team)
Standings$Team<- gsub("PS", "Pho", Standings$Team)
Standings$Team<- gsub("PTB", "Por", Standings$Team)
Standings$Team<- gsub("LAC", "Lac", Standings$Team)
Standings$Team<- gsub("SK", "Sac", Standings$Team)
Standings$Team<- gsub("LAL", "Lal", Standings$Team)
Standings$Team<- gsub("MT", "Min", Standings$Team)
Standings$Team<- gsub("PP", "Phi", Standings$Team)
ProjStand <- merge.data.frame(Standings, AddedStand, all = TRUE)
ProjStand[,2] <- as.numeric(as.character(ProjStand[,2]))
ProjStand[,3] <- as.numeric(as.character(ProjStand[,3]))
ProjStand$W <- ProjStand$`Current-W`+ProjStand$W
ProjStand$L <- ProjStand$`Current-L`+ProjStand$L
arrange(ProjStand, Conference,desc(W))
write.csv(ProjStand, "ProjStand.csv")
saveRDS(ProjStand, "ProjStand.rds")
Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Standings <- readHTMLTable(Standings)
Standings <- list(Western = Standings$confs_standings_W, Eastern = Standings$confs_standings_E)
Standings[[1]]$Conference <- c("West")
Standings[[2]]$Conference <- c("East")
colnames(Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
Standings <- rbind(Standings[[1]], Standings[[2]])
Standings <- Standings[,c(1,2,3,9)]
Standings$Team <- gsub("76ers", "Phi", Standings$Team)
Standings$Team <- gsub("(?<=\\b[A-Z])[^A-Z]+", "", Standings$Team, perl = TRUE)
Standings$Team <- gsub("DP", "Det", Standings$Team)
Standings$Team<- gsub("AH", "Atl", Standings$Team)
Standings$Team <- gsub("CB", "Chi", Standings$Team)
Standings$Team<- gsub("BC", "Bos", Standings$Team)
Standings$Team<- gsub("CC", "Cle", Standings$Team)
Standings$Team<- gsub("NOP", "NO", Standings$Team)
Standings$Team<- gsub("OM", "ORL", Standings$Team)
Standings$Team<- gsub("WW", "Was", Standings$Team)
Standings$Team<- gsub("BN", "Bkn", Standings$Team)
Standings$Team<- gsub("UJ", "Uta", Standings$Team)
Standings$Team<- gsub("MH", "Mia", Standings$Team)
Standings$Team<- gsub("CH", "Cha", Standings$Team)
Standings$Team<- gsub("TR", "Tor", Standings$Team)
Standings$Team<- gsub("IP", "Ind", Standings$Team)
Standings$Team<- gsub("HR", "Hou", Standings$Team)
Standings$Team<- gsub("DN", "Den", Standings$Team)
Standings$Team<- gsub("MG", "Mem", Standings$Team)
Standings$Team<- gsub("NYK", "NY", Standings$Team)
Standings$Team<- gsub("MB", "Mil", Standings$Team)
Standings$Team<- gsub("OCT", "Okc", Standings$Team)
Standings$Team<- gsub("SAS", "Sas", Standings$Team)
Standings$Team<- gsub("DM", "Dal", Standings$Team)
Standings$Team<- gsub("PS", "Pho", Standings$Team)
Standings$Team<- gsub("PTB", "Por", Standings$Team)
Standings$Team<- gsub("LAC", "Lac", Standings$Team)
Standings$Team<- gsub("SK", "Sac", Standings$Team)
Standings$Team<- gsub("LAL", "Lal", Standings$Team)
Standings$Team<- gsub("MT", "Min", Standings$Team)
Standings$Team<- gsub("PP", "Phi", Standings$Team)
ProjStand <- merge.data.frame(Standings, AddedStand, all = TRUE)
ProjStand[,2] <- as.numeric(as.character(ProjStand[,2]))
ProjStand[,3] <- as.numeric(as.character(ProjStand[,3]))
ProjStand$W <- ProjStand$`Current-W`+ProjStand$W
ProjStand$L <- ProjStand$`Current-L`+ProjStand$L
ProjStand <- arrange(ProjStand, Conference,desc(W))
write.csv(ProjStand, "ProjStand.csv")
saveRDS(ProjStand, "ProjStand.rds")
View(datos2012)
shotDatafDef2017 <- readRDS("shotDatafDef2017")
shotDatafDef2017 <- readRDS("shotDatafDef2017.rds")
shotDataTotal2017 <- readRDS("shotDataTotal2017.rds")
unique(shotDataTotal2017$TEAM_NAME)
shotDataTotal2017b <- shotDataTotal2017
shotDataTotal2017b$PLAYER_NAME == "Carmelo Anthony"
unique(shotDataTotal2017$TEAM_NAME)
source('~/Sloan/Love_for_Melo.R')
source('~/Sloan/Love_for_Melo.R')
future_trade
dfTRADE
dfTRADE$Cle
dfTRADE$GSW
hist(dfTRADE$GSW)
hist(dfTRADE$GSW)
hist(dfTRADE$Cle)
mean(dfTRADE$Cle*100)
mean(dfNORMAL$Cle*100)
future_trade<- future_games
future_trade$spread <- predict(BRT, data.frame(defAPPS = unlist(future_trade$defAPPS), offAPPS = unlist(future_trade$offAPPS)), type="raw")
future_trade <- future_trade[,c(1,3,5,12)]
future_trade$Home <- ifelse(future_trade$spread < 0, "W", "L")
future_trade$Visit <- ifelse(future_trade$spread > 0, "W", "L")
Home <- cbind(future_trade$`Home/Neutral`, future_trade$Home)
colnames(Home) <- c("Team", "Result")
Visit <- cbind(future_trade$`Visitor/Neutral`, future_trade$Visit)
colnames(Visit) <- c("Team", "Result")
Trade_Added_Stand <- data.frame(rbind(Home, Visit))
#Wins
Trade_Added_Stand_W <- dplyr::filter(Trade_Added_Stand, Result == "W")
Trade_Added_Stand_W <- group_by(Trade_Added_Stand_W, Team)
Trade_Added_Stand_W <- dplyr::summarize(Trade_Added_Stand_W, W = n())
#Loses
Trade_Added_Stand_L <- dplyr::filter(Trade_Added_Stand, Result == "L")
Trade_Added_Stand_L <- group_by(Trade_Added_Stand_L, Team)
Trade_Added_Stand_L <- dplyr::summarize(Trade_Added_Stand_L, L = n())
Trade_Added_Stand <- merge.data.frame(Trade_Added_Stand_W, Trade_Added_Stand_L, all = TRUE)
#####Standing scraper
Trade_Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Trade_Standings <- readHTMLTable(Trade_Standings)
Trade_Standings <- list(Western = Trade_Standings$confs_standings_W, Eastern = Trade_Standings$confs_Standings_E)
Trade_Standings[[1]]$Conference <- c("West")
Trade_Standings[[2]]$Conference <- c("East")
colnames(Trade_Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Trade_Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
Trade_Standings <- rbind(Trade_Standings[[1]], Trade_Standings[[2]])
Trade_Standings <- Trade_Standings[,c(1,2,3,9)]
Trade_Standings$Team <- gsub("76ers", "Phi", Trade_Standings$Team)
Trade_Standings$Team <- gsub("(?<=\\b[A-Z])[^A-Z]+", "", Trade_Standings$Team, perl = TRUE)
Trade_Standings$Team <- gsub("DP", "Det", Trade_Standings$Team)
Trade_Standings$Team<- gsub("AH", "Atl", Trade_Standings$Team)
Trade_Standings$Team <- gsub("CB", "Chi", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BC", "Bos", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CC", "Cle", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NOP", "NO", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OM", "ORL", Trade_Standings$Team)
Trade_Standings$Team<- gsub("WW", "Was", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BN", "Bkn", Trade_Standings$Team)
Trade_Standings$Team<- gsub("UJ", "Uta", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MH", "Mia", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CH", "Cha", Trade_Standings$Team)
Trade_Standings$Team<- gsub("TR", "Tor", Trade_Standings$Team)
Trade_Standings$Team<- gsub("IP", "Ind", Trade_Standings$Team)
Trade_Standings$Team<- gsub("HR", "Hou", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DN", "Den", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MG", "Mem", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NYK", "NY", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MB", "Mil", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OCT", "Okc", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SAS", "Sas", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DM", "Dal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PS", "Pho", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PTB", "Por", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAC", "Lac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SK", "Sac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAL", "Lal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MT", "Min", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PP", "Phi", Trade_Standings$Team)
Trade_Proj_Stand <- merge.data.frame(Trade_Standings, Trade_Added_Stand, all = TRUE)
Trade_Proj_Stand[,2] <- as.numeric(as.character(Trade_Proj_Stand[,2]))
Trade_Proj_Stand[,3] <- as.numeric(as.character(Trade_Proj_Stand[,3]))
Trade_Proj_Stand$W <- Trade_Proj_Stand$`Current-W`+Trade_Proj_Stand$W
Trade_Proj_Stand$L <- Trade_Proj_Stand$`Current-L`+Trade_Proj_Stand$L
Trade_Proj_Stand <- arrange(Trade_Proj_Stand, Conference,desc(W))
write.csv(Trade_Proj_Stand, "Trade_Proj_Stand.csv")
saveRDS(Trade_Proj_Stand, "Trade_Proj_Stand.rds")
future_trade<- future_games
future_trade$spread <- predict(BRT, data.frame(defAPPS = unlist(future_trade$defAPPS), offAPPS = unlist(future_trade$offAPPS)), type="raw")
future_games <- schedule[schedule$Date >= Sys.Date(),]
future_games$defAPPS <- NA
future_games$offAPPS <- NA
future_games$spread <- NA
for(i in 1:NROW(future_games)) {
future_games$defAPPS[i] <- ComparisonPPS(OffTeam = future_games$`Home/Neutral`[i], DefTown = future_games$`Visitor/Neutral`[i], SeasondataOff = shotDataTotal2017, SeasonDataDef = shotDatafDef2017)
}
for(i in 1:NROW(future_games)) {
future_games$offAPPS[i] <- ComparisonPPS(OffTeam = future_games$`Visitor/Neutral`[i], DefTown = future_games$`Home/Neutral`[i], SeasondataOff = shotDataTotal2017, SeasonDataDef = shotDatafDef2017)
}
future_games <- schedule[schedule$Date >= Sys.Date(),]
future_games$defAPPS <- NA
future_games$offAPPS <- NA
future_games$spread <- NA
for(i in 1:NROW(future_games)) {
future_games$defAPPS[i] <- ComparisonPPS(OffTeam = future_games$`Home/Neutral`[i], DefTown = future_games$`Visitor/Neutral`[i], SeasondataOff = shotDataTotal2017b, SeasonDataDef = shotDatafDef2017)
}
for(i in 1:NROW(future_games)) {
future_games$offAPPS[i] <- ComparisonPPS(OffTeam = future_games$`Visitor/Neutral`[i], DefTown = future_games$`Home/Neutral`[i], SeasondataOff = shotDataTotal2017b, SeasonDataDef = shotDatafDef2017)
}
library(caret)
BRT <- readRDS("BRT2017_17_Jan.rds")
future_trade<- future_games
future_trade$spread <- predict(BRT, data.frame(defAPPS = unlist(future_trade$defAPPS), offAPPS = unlist(future_trade$offAPPS)), type="raw")
future_trade <- future_trade[,c(1,3,5,12)]
future_trade$Home <- ifelse(future_trade$spread < 0, "W", "L")
future_trade$Visit <- ifelse(future_trade$spread > 0, "W", "L")
Home <- cbind(future_trade$`Home/Neutral`, future_trade$Home)
colnames(Home) <- c("Team", "Result")
Visit <- cbind(future_trade$`Visitor/Neutral`, future_trade$Visit)
colnames(Visit) <- c("Team", "Result")
Trade_Added_Stand <- data.frame(rbind(Home, Visit))
#Wins
Trade_Added_Stand_W <- dplyr::filter(Trade_Added_Stand, Result == "W")
Trade_Added_Stand_W <- group_by(Trade_Added_Stand_W, Team)
Trade_Added_Stand_W <- dplyr::summarize(Trade_Added_Stand_W, W = n())
#Loses
Trade_Added_Stand_L <- dplyr::filter(Trade_Added_Stand, Result == "L")
Trade_Added_Stand_L <- group_by(Trade_Added_Stand_L, Team)
Trade_Added_Stand_L <- dplyr::summarize(Trade_Added_Stand_L, L = n())
Trade_Added_Stand <- merge.data.frame(Trade_Added_Stand_W, Trade_Added_Stand_L, all = TRUE)
#####Standing scraper
Trade_Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Trade_Standings <- readHTMLTable(Trade_Standings)
Trade_Standings <- list(Western = Trade_Standings$confs_standings_W, Eastern = Trade_Standings$confs_Standings_E)
Trade_Standings[[1]]$Conference <- c("West")
Trade_Standings[[2]]$Conference <- c("East")
colnames(Trade_Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Trade_Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
Trade_Standings <- rbind(Trade_Standings[[1]], Trade_Standings[[2]])
Trade_Standings <- Trade_Standings[,c(1,2,3,9)]
Trade_Standings$Team <- gsub("76ers", "Phi", Trade_Standings$Team)
Trade_Standings$Team <- gsub("(?<=\\b[A-Z])[^A-Z]+", "", Trade_Standings$Team, perl = TRUE)
Trade_Standings$Team <- gsub("DP", "Det", Trade_Standings$Team)
Trade_Standings$Team<- gsub("AH", "Atl", Trade_Standings$Team)
Trade_Standings$Team <- gsub("CB", "Chi", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BC", "Bos", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CC", "Cle", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NOP", "NO", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OM", "ORL", Trade_Standings$Team)
Trade_Standings$Team<- gsub("WW", "Was", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BN", "Bkn", Trade_Standings$Team)
Trade_Standings$Team<- gsub("UJ", "Uta", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MH", "Mia", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CH", "Cha", Trade_Standings$Team)
Trade_Standings$Team<- gsub("TR", "Tor", Trade_Standings$Team)
Trade_Standings$Team<- gsub("IP", "Ind", Trade_Standings$Team)
Trade_Standings$Team<- gsub("HR", "Hou", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DN", "Den", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MG", "Mem", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NYK", "NY", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MB", "Mil", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OCT", "Okc", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SAS", "Sas", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DM", "Dal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PS", "Pho", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PTB", "Por", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAC", "Lac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SK", "Sac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAL", "Lal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MT", "Min", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PP", "Phi", Trade_Standings$Team)
Trade_Proj_Stand <- merge.data.frame(Trade_Standings, Trade_Added_Stand, all = TRUE)
Trade_Proj_Stand[,2] <- as.numeric(as.character(Trade_Proj_Stand[,2]))
Trade_Proj_Stand[,3] <- as.numeric(as.character(Trade_Proj_Stand[,3]))
Trade_Proj_Stand$W <- Trade_Proj_Stand$`Current-W`+Trade_Proj_Stand$W
Trade_Proj_Stand$L <- Trade_Proj_Stand$`Current-L`+Trade_Proj_Stand$L
Trade_Proj_Stand <- arrange(Trade_Proj_Stand, Conference,desc(W))
write.csv(Trade_Proj_Stand, "Trade_Proj_Stand.csv")
saveRDS(Trade_Proj_Stand, "Trade_Proj_Stand.rds")
library(XML)
Trade_Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Trade_Standings <- readHTMLTable(Trade_Standings)
Trade_Standings <- list(Western = Trade_Standings$confs_standings_W, Eastern = Trade_Standings$confs_Standings_E)
Trade_Standings[[1]]$Conference <- c("West")
Trade_Standings[[2]]$Conference <- c("East")
colnames(Trade_Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Trade_Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
Trade_Standings <- rbind(Trade_Standings[[1]], Trade_Standings[[2]])
Trade_Standings <- Trade_Standings[,c(1,2,3,9)]
Trade_Standings$Team <- gsub("76ers", "Phi", Trade_Standings$Team)
Trade_Standings$Team <- gsub("(?<=\\b[A-Z])[^A-Z]+", "", Trade_Standings$Team, perl = TRUE)
Trade_Standings$Team <- gsub("DP", "Det", Trade_Standings$Team)
Trade_Standings$Team<- gsub("AH", "Atl", Trade_Standings$Team)
Trade_Standings$Team <- gsub("CB", "Chi", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BC", "Bos", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CC", "Cle", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NOP", "NO", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OM", "ORL", Trade_Standings$Team)
Trade_Standings$Team<- gsub("WW", "Was", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BN", "Bkn", Trade_Standings$Team)
Trade_Standings$Team<- gsub("UJ", "Uta", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MH", "Mia", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CH", "Cha", Trade_Standings$Team)
Trade_Standings$Team<- gsub("TR", "Tor", Trade_Standings$Team)
Trade_Standings$Team<- gsub("IP", "Ind", Trade_Standings$Team)
Trade_Standings$Team<- gsub("HR", "Hou", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DN", "Den", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MG", "Mem", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NYK", "NY", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MB", "Mil", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OCT", "Okc", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SAS", "Sas", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DM", "Dal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PS", "Pho", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PTB", "Por", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAC", "Lac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SK", "Sac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAL", "Lal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MT", "Min", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PP", "Phi", Trade_Standings$Team)
Trade_Proj_Stand <- merge.data.frame(Trade_Standings, Trade_Added_Stand, all = TRUE)
Trade_Proj_Stand[,2] <- as.numeric(as.character(Trade_Proj_Stand[,2]))
Trade_Proj_Stand[,3] <- as.numeric(as.character(Trade_Proj_Stand[,3]))
Trade_Proj_Stand$W <- Trade_Proj_Stand$`Current-W`+Trade_Proj_Stand$W
Trade_Proj_Stand$L <- Trade_Proj_Stand$`Current-L`+Trade_Proj_Stand$L
Trade_Proj_Stand <- arrange(Trade_Proj_Stand, Conference,desc(W))
write.csv(Trade_Proj_Stand, "Trade_Proj_Stand.csv")
saveRDS(Trade_Proj_Stand, "Trade_Proj_Stand.rds")
Trade_Standings
str(Trade_Standings)
library(XML)
Trade_Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Trade_Standings <- readHTMLTable(Trade_Standings)
Trade_Standings <- list(Western = Trade_Standings$confs_standings_W, Eastern = Trade_Standings$confs_Standings_E)
Trade_Standings[[1]]$Conference <- c("West")
Trade_Standings[[2]]$Conference <- c("East")
colnames(Trade_Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Trade_Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
str(Trade_Standings)
library(XML)
Trade_Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Trade_Standings <- readHTMLTable(Trade_Standings)
Trade_Standings <- list(Western = Trade_Standings$confs_standings_W, Eastern = Trade_Standings$confs_Standings_E)
str(Trade_Standings)
Trade_Standings <- "http://www.basketball-reference.com/leagues/NBA_2017.html"
Trade_Standings <- readHTMLTable(Trade_Standings)
str(Trade_Standings)
Trade_Standings <- list(Western = Trade_Standings$confs_standings_W, Eastern = Trade_Standings$confs_standings_E)
Trade_Standings[[1]]$Conference <- c("West")
Trade_Standings[[2]]$Conference <- c("East")
colnames(Trade_Standings[[1]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
colnames(Trade_Standings[[2]]) <- c("Team", "Current-W", "Current-L", "pct", "GB", "PS/G", "PA/G", "SRS", "Conference")
Trade_Standings <- rbind(Trade_Standings[[1]], Trade_Standings[[2]])
Trade_Standings <- Trade_Standings[,c(1,2,3,9)]
Trade_Standings$Team <- gsub("76ers", "Phi", Trade_Standings$Team)
Trade_Standings$Team <- gsub("(?<=\\b[A-Z])[^A-Z]+", "", Trade_Standings$Team, perl = TRUE)
Trade_Standings$Team <- gsub("DP", "Det", Trade_Standings$Team)
Trade_Standings$Team<- gsub("AH", "Atl", Trade_Standings$Team)
Trade_Standings$Team <- gsub("CB", "Chi", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BC", "Bos", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CC", "Cle", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NOP", "NO", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OM", "ORL", Trade_Standings$Team)
Trade_Standings$Team<- gsub("WW", "Was", Trade_Standings$Team)
Trade_Standings$Team<- gsub("BN", "Bkn", Trade_Standings$Team)
Trade_Standings$Team<- gsub("UJ", "Uta", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MH", "Mia", Trade_Standings$Team)
Trade_Standings$Team<- gsub("CH", "Cha", Trade_Standings$Team)
Trade_Standings$Team<- gsub("TR", "Tor", Trade_Standings$Team)
Trade_Standings$Team<- gsub("IP", "Ind", Trade_Standings$Team)
Trade_Standings$Team<- gsub("HR", "Hou", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DN", "Den", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MG", "Mem", Trade_Standings$Team)
Trade_Standings$Team<- gsub("NYK", "NY", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MB", "Mil", Trade_Standings$Team)
Trade_Standings$Team<- gsub("OCT", "Okc", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SAS", "Sas", Trade_Standings$Team)
Trade_Standings$Team<- gsub("DM", "Dal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PS", "Pho", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PTB", "Por", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAC", "Lac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("SK", "Sac", Trade_Standings$Team)
Trade_Standings$Team<- gsub("LAL", "Lal", Trade_Standings$Team)
Trade_Standings$Team<- gsub("MT", "Min", Trade_Standings$Team)
Trade_Standings$Team<- gsub("PP", "Phi", Trade_Standings$Team)
Trade_Proj_Stand <- merge.data.frame(Trade_Standings, Trade_Added_Stand, all = TRUE)
Trade_Proj_Stand[,2] <- as.numeric(as.character(Trade_Proj_Stand[,2]))
Trade_Proj_Stand[,3] <- as.numeric(as.character(Trade_Proj_Stand[,3]))
Trade_Proj_Stand$W <- Trade_Proj_Stand$`Current-W`+Trade_Proj_Stand$W
Trade_Proj_Stand$L <- Trade_Proj_Stand$`Current-L`+Trade_Proj_Stand$L
Trade_Proj_Stand <- arrange(Trade_Proj_Stand, Conference,desc(W))
write.csv(Trade_Proj_Stand, "Trade_Proj_Stand.csv")
saveRDS(Trade_Proj_Stand, "Trade_Proj_Stand.rds")
mean(dfTRADE$Cle*100)
mean(dfNORMAL$Cle*100)
rownames(dfNORMAL)
mean(dfNORMAL[,3]*100)
dfNORMAL[,3]
mean(dfNORMAL[3,]*100)
dfNORMAL[3,]
class(dfNORMAL[3,])
as.numeric(dfNORMAL[3,])
mean(dfNORMAL$GSW*100)
mean(dfTRADE$GSW*100)
as.numeric(dfNORMAL[8,])
as.numeric(dfNORMAL[3,])
mean(as.numeric(dfNORMAL[3,]))
mean(as.numeric(dfTRADE[3,]))
mean(as.numeric(dfTRADE[3,])*100)
mean(as.numeric(dfTRADE[8,])*100)
Com1 <- ShotComparisonGraph2(OffTeam = "Cle", DefTown = "GSW", SeasondataOff = shotDataTotal2017, SeasonDataDef = shotDatafDef2017, nbins = 30, quant = 0.8, focus = "all")
Com2 <- ShotComparisonGraph2(OffTeam = "Cle", DefTown = "Golden State", SeasondataOff = shotDataTotal2017b, SeasonDataDef = shotDatafDef2017, nbins = 30, quant = 0.8, focus = "all")
grid.arrange(Com1$charts,Com2$charts,Com1$leg,ncol=1,heights=c(3/7, 3/7 ,1/7))
Com1 <- ShotComparisonGraph2(OffTeam = "Cle", DefTown = "GSW", SeasondataOff = shotDataTotal2017, SeasonDataDef = shotDatafDef2017, nbins = 30, quant = 0.8, focus = "all")
Com2 <- ShotComparisonGraph2(OffTeam = "Cle", DefTown = "GSW", SeasondataOff = shotDataTotal2017b, SeasonDataDef = shotDatafDef2017, nbins = 30, quant = 0.8, focus = "all")
grid.arrange(Com1$charts,Com2$charts,Com1$leg,ncol=1,heights=c(3/7, 3/7 ,1/7))
shotDataTotal2017
shotDataTotal2017$TEAM_NAME == "Cle"
shotDataTotal2017[,shotDataTotal2017$TEAM_NAME == "Cle"]
shotDataTotal2017[shotDataTotal2017$TEAM_NAME == "Cle",]
View(shotDataTotal2017[shotDataTotal2017$TEAM_NAME == "Cle",])
unique(shotDataTotal2017[shotDataTotal2017$TEAM_NAME == "Cle",]$PLAYER_NAME)
unique(shotDataTotal2017b[shotDataTotal2017b$TEAM_NAME == "Cle",]$PLAYER_NAME)
View(shotDataTotal2017b[shotDataTotal2017b$TEAM_NAME == "Cle",])
View(tail(shotDataTotal2017b[shotDataTotal2017b$TEAM_NAME == "Cle",]))
View(tail(shotDataTotal2017[shotDataTotal2017$TEAM_NAME == "Cle",]))
Com1
Com1 <- ShotComparisonGraph2(OffTeam = "Cle", DefTown = "GSW", SeasondataOff = shotDataTotal2017, SeasonDataDef = shotDatafDef2017, nbins = 30, quant = 0.8, focus = "plus")
Com2 <- ShotComparisonGraph2(OffTeam = "Cle", DefTown = "GSW", SeasondataOff = shotDataTotal2017b, SeasonDataDef = shotDatafDef2017, nbins = 30, quant = 0.8, focus = "plus")
grid.arrange(Com1$charts,Com2$charts,Com1$leg,ncol=1,heights=c(3/7, 3/7 ,1/7))
Com1$PPSAA
Com3 <- ShotComparisonGraph2(OffTeam = "GSW", DefTown = "Cle", SeasondataOff = shotDataTotal2017, SeasonDataDef = shotDatafDef2017, nbins = 30, quant = 0.8, focus = "plus")
Com3$PPSAA
predict(BRT, data.frame(defAPPS =Com1$PPSAA, offAPPS = Com3, type="raw")
)
predict(BRT, defAPPS =Com1$PPSAA, offAPPS = Com3$PPSAA, type="raw")
Com1$PPSAA
Com3$PPSAA
predict(BRT, defAPPS =Com1$PPSAA, offAPPS = Com3$PPSAA, type="raw")
library(caret)
predict(BRT, defAPPS =Com1$PPSAA, offAPPS = Com3$PPSAA, type="raw")
predict(BRT, data.frame(defAPPS =Com1$PPSAA, offAPPS = Com3$PPSAA), type="raw")
predict(BRT, data.frame(defAPPS =Com1$PPSAA, offAPPS = Com3$PPSAA), type="raw")
predict(BRT, data.frame(defAPPS =Com3$PPSAA, offAPPS = Com1$PPSAA), type="raw")
library(caret)
predict(BRT, data.frame(defAPPS =Com2$PPSAA, offAPPS = Com3$PPSAA), type="raw")
predict(BRT, data.frame(defAPPS =Com3$PPSAA, offAPPS = Com2$PPSAA), type="raw")
source('~/Sloan/2017SeasonScrub.R')
warnings()
ProjStand
ProjStand
class(ProjStand)
source('~/Sloan/2017SeasonScrub.R')
write.csv(ProjStand, "ProjStand.csv")
saveRDS(ProjStand, "ProjStand.rds")
write.csv(future_games, "future_games.csv")
saveRDS(future_games, "future_games.rds")
